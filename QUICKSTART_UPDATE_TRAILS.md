# ğŸ¯ ç”Ÿäº§ç¯å¢ƒTrailæ•°æ®æ›´æ–° - å¿«é€ŸæŒ‡å—

## âœ… æœ€ç®€å•çš„æ–¹æ³•

### æµ‹è¯•æ›´æ–°ï¼ˆæ¨èç¬¬ä¸€æ¬¡è¿è¡Œï¼‰
```bash
cd backend-api
make update-trails-test
```
åªæ›´æ–°å‰5ä¸ªé›ªåœºï¼ŒéªŒè¯ä¸€åˆ‡æ­£å¸¸ã€‚

### å…¨é‡æ›´æ–°
```bash
make update-trails
```
æ›´æ–°æ‰€æœ‰309ä¸ªé›ªåœºï¼Œé¢„è®¡25-30åˆ†é’Ÿã€‚

### å•ä¸ªé›ªåœºæ›´æ–°
```bash
make update-trails-single RESORT_ID=1
```

## ğŸ“ å·¥ä½œæµç¨‹

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. âœ… ä» Terraform è·å–ç”Ÿäº§ç¯å¢ƒé…ç½®ï¼ˆRDSã€Redisç«¯ç‚¹ï¼‰
2. âœ… æµ‹è¯•æ•°æ®åº“è¿æ¥
3. âœ… æ˜¾ç¤ºæ›´æ–°è®¡åˆ’å¹¶è¯·æ±‚ç¡®è®¤
4. âœ… å¼€å§‹é‡‡é›†OpenStreetMapé›ªé“æ•°æ®
5. âœ… ä¿å­˜åˆ°ç”Ÿäº§æ•°æ®åº“
6. âœ… ç”Ÿæˆè¯¦ç»†çš„HTMLå’ŒJSONæŠ¥å‘Š

## â±ï¸ é¢„è®¡æ—¶é—´

- **æµ‹è¯•æ›´æ–°ï¼ˆ5ä¸ªé›ªåœºï¼‰**: ~30ç§’
- **å…¨é‡æ›´æ–°ï¼ˆ309ä¸ªé›ªåœºï¼‰**: ~25-30åˆ†é’Ÿ
- **å•ä¸ªé›ªåœº**: ~5ç§’

## ğŸ“‹ å‰ç½®æ¡ä»¶

### 1. ç¡®ä¿åœ¨æ­£ç¡®çš„ç›®å½•
```bash
cd /Users/jimmysun/Desktop/workspace/resort-data/backend-api
```

### 2. å·²å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

### 3. AWSé…ç½®æ­£ç¡®
```bash
aws configure --profile pp
```

### 4. TerraformçŠ¶æ€æ­£å¸¸
```bash
cd terraform && terraform plan
```

## ğŸš€ æ¨èæ‰§è¡Œæ­¥éª¤

### ç¬¬ä¸€æ¬¡è¿è¡Œ

```bash
# 1. æµ‹è¯•è¿æ¥å’Œé…ç½®
make update-trails-test

# 2. æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š
open data/trails_report.html

# 3. å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œè¿è¡Œå…¨é‡æ›´æ–°
make update-trails
```

### æ—¥å¸¸æ›´æ–°

```bash
# ç›´æ¥è¿è¡Œå…¨é‡æ›´æ–°
make update-trails
```

## ğŸ“Š æŸ¥çœ‹ç»“æœ

é‡‡é›†å®Œæˆåï¼š

```bash
# åœ¨æµè§ˆå™¨æŸ¥çœ‹HTMLæŠ¥å‘Š
open data/trails_report.html

# æˆ–æŸ¥çœ‹JSONæŠ¥å‘Š
cat data/trails_report.json | jq '.summary'
```

æŠ¥å‘ŠåŒ…å«ï¼š
- âœ… æˆåŠŸ/å¤±è´¥/è·³è¿‡çš„é›ªåœºç»Ÿè®¡
- âœ… æ¯ä¸ªé›ªåœºçš„é›ªé“æ•°é‡
- âœ… éš¾åº¦åˆ†å¸ƒç»Ÿè®¡
- âœ… é”™è¯¯è¯¦æƒ…

## ğŸ”§ é«˜çº§ç”¨æ³•

### åªæ›´æ–°ç‰¹å®šé›ªåœºåˆ—è¡¨
```bash
# æ›´æ–°ID 1-10çš„é›ªåœº
for id in {1..10}; do
    python3 update_prod_trails.py --resort-id $id --skip-verify
done
```

### é™åˆ¶æ›´æ–°æ•°é‡
```bash
# åªæ›´æ–°å‰50ä¸ª
python3 update_prod_trails.py --limit 50
```

### è·³è¿‡ç¡®è®¤æç¤º
```bash
python3 update_prod_trails.py --skip-verify
```

## âš ï¸ æ•…éšœæ’æŸ¥

### é—®é¢˜: æ— æ³•è¿æ¥æ•°æ®åº“

```bash
# æ£€æŸ¥Terraformè¾“å‡º
cd terraform
terraform output rds_endpoint

# æµ‹è¯•æ•°æ®åº“è¿æ¥
psql -h <RDSç«¯ç‚¹> -U app -d snow
```

### é—®é¢˜: OSM APIé™æµ

ç­‰å¾…å‡ åˆ†é’Ÿåé‡è¯•ï¼Œæˆ–å¢åŠ é‡‡é›†é—´éš”ã€‚

### é—®é¢˜: éƒ¨åˆ†é›ªåœºå¤±è´¥

æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Šï¼š
```bash
open data/trails_report.html
```
æ‰¾åˆ°å¤±è´¥çš„é›ªåœºï¼Œå¯ä»¥å•ç‹¬é‡æ–°é‡‡é›†ã€‚

## ğŸ“ ç›¸å…³æ–‡ä»¶

- **è„šæœ¬**: `update_prod_trails.py` - ä¸»æ›´æ–°è„šæœ¬
- **é…ç½®**: `resorts_config.json` - é›ªåœºé…ç½®ï¼ˆ309ä¸ªï¼‰
- **é‡‡é›†å™¨**: `collect_trails.py` - é›ªé“é‡‡é›†é€»è¾‘
- **æŠ¥å‘Š**: `data/trails_report.html` - é‡‡é›†ç»“æœæŠ¥å‘Š

## ğŸ’¡ æç¤º

1. **é¦–æ¬¡è¿è¡Œå»ºè®®å…ˆæµ‹è¯•**: `make update-trails-test`
2. **åœ¨éé«˜å³°æ—¶æ®µè¿è¡Œ**: é¿å…å½±å“APIæ€§èƒ½
3. **å®šæœŸæ›´æ–°**: å»ºè®®æ¯å‘¨æˆ–æ¯æœˆæ›´æ–°ä¸€æ¬¡
4. **æŸ¥çœ‹æŠ¥å‘Š**: åŠæ—¶å‘ç°å’Œä¿®å¤å¤±è´¥çš„é›ªåœº

---

**å‡†å¤‡å¥½äº†å—ï¼Ÿå¼€å§‹æ›´æ–°ï¼** ğŸ¿

```bash
make update-trails-test  # å…ˆæµ‹è¯•
# ç„¶å
make update-trails       # å…¨é‡æ›´æ–°
```

